@model ArchiveDomain.Model.Query

@{
    ViewData["Title"] = "Запити";
}

<div class="page-content">
    <h1 class="mb-4">Параметризовані SQL-запити</h1>

    @if (ViewBag.ErrorFlag != null && ViewBag.ErrorFlag == 1)
    {
        <div class="alert alert-danger">
            @ViewBag.QuantityError
        </div>
    }

    <!-- Query 1 -->
    <div class="mb-4">
        <h4 class="mb-3">Запит 1: Вірші автора з заданим прізвищем, у назві цих віршів є ключове слово, та кількість лайків на цих віршах не менша заданої</h4>
        <form asp-action="Query1" method="post">
            <div asp-validation-summary="ModelOnly" class="text-danger"></div>
            <div class="row g-3">
                <div class="col-md-4">
                    <label asp-for="LastName" class="form-label">Прізвище автора</label>
                    <input asp-for="LastName" class="form-control" />
                    <span asp-validation-for="LastName" class="text-danger"></span>
                </div>
                <div class="col-md-4">
                    <label asp-for="Keyword" class="form-label">Ключове слово</label>
                    <input asp-for="Keyword" class="form-control" />
                    <span asp-validation-for="Keyword" class="text-danger"></span>
                </div>
                <div class="col-md-4">
                    <label asp-for="MinLikes" class="form-label">Мінімальна кількість лайків</label>
                    <input asp-for="MinLikes" class="form-control" type="number" />
                    <span asp-validation-for="MinLikes" class="text-danger"></span>
                </div>
            </div>
            <div class="mt-3">
                <button type="submit" class="btn btn-primary">Виконати</button>
            </div>
        </form>
    </div>

    <!-- Query 2 -->
    <div class="mb-4">
        <h4 class="mb-3">Запит 2: Автори, які писали мовою</h4>
        <form asp-action="Query2" method="post">
            <div asp-validation-summary="ModelOnly" class="text-danger"></div>
            <div class="row g-3">
                <div class="col-md-4">
                    <label asp-for="LanguageName" class="form-label">Назва мови</label>
                    <input asp-for="LanguageName" class="form-control" />
                    <span asp-validation-for="LanguageName" class="text-danger"></span>
                </div>
            </div>
            <div class="mt-3">
                <button type="submit" class="btn btn-primary">Виконати</button>
            </div>
        </form>
    </div>

    <!-- Query 3 -->
    <div class="mb-4">
        <h4 class="mb-3">Запит 3: Жанри віршів, опублікованих після заданої дати включно</h4>
        <form asp-action="Query3" method="post">
            <div asp-validation-summary="ModelOnly" class="text-danger"></div>
            <div class="row g-3">
                <div class="col-md-4">
                    <label asp-for="AfterDate" class="form-label">Дата (після)</label>
                    <input asp-for="AfterDate" class="form-control" type="date" />
                    <span asp-validation-for="AfterDate" class="text-danger"></span>
                </div>
            </div>
            <div class="mt-3">
                <button type="submit" class="btn btn-primary">Виконати</button>
            </div>
        </form>
    </div>

    <!-- Query 4 -->
    <div class="mb-4">
        <h4 class="mb-3">Запит 4: Користувачі, які лайкали хоча б один вірш жанру</h4>
        <form asp-action="Query4" method="post">
            <div asp-validation-summary="ModelOnly" class="text-danger"></div>
            <div class="row g-3">
                <div class="col-md-4">
                    <label asp-for="FormName" class="form-label">Назва жанру</label>
                    <input asp-for="FormName" class="form-control" />
                    <span asp-validation-for="FormName" class="text-danger"></span>
                </div>
            </div>
            <div class="mt-3">
                <button type="submit" class="btn btn-primary">Виконати</button>
            </div>
        </form>
    </div>

    <!-- Query 5 -->
    <div class="mb-4">
        <h4 class="mb-3">Запит 5: Вірші адміна мовою</h4>
        <form asp-action="Query5" method="post">
            <div asp-validation-summary="ModelOnly" class="text-danger"></div>
            <div class="row g-3">
                <div class="col-md-4">
                    <label asp-for="AdminName" class="form-label">Логін адміна</label>
                    <input asp-for="AdminName" class="form-control" />
                    <span asp-validation-for="AdminName" class="text-danger"></span>
                </div>
                <div class="col-md-4">
                    <label asp-for="LanguageName" class="form-label">Мова</label>
                    <input asp-for="LanguageName" class="form-control" />
                    <span asp-validation-for="LanguageName" class="text-danger"></span>
                </div>
            </div>
            <div class="mt-3">
                <button type="submit" class="btn btn-primary">Виконати</button>
            </div>
        </form>
    </div>

    <!-- Query 6 -->
    <div class="mb-4">
        <h4 class="mb-3">Запит 6: Користувачі з такими ж лайками, як заданий користувач</h4>
        <form asp-action="Query6" method="post">
            <div asp-validation-summary="ModelOnly" class="text-danger"></div>
            <div class="row g-3">
                <div class="col-md-4">
                    <label asp-for="UserName" class="form-label">Логін користувача</label>
                    <input asp-for="UserName" class="form-control" />
                    <span asp-validation-for="UserName" class="text-danger"></span>
                </div>
            </div>
            <div class="mt-3">
                <button type="submit" class="btn btn-primary">Виконати</button>
            </div>
        </form>
    </div>

    <!-- Query 7 -->
    <div class="mb-4">
        <h4 class="mb-3">Запит 7: Автори, які писали у тих самих жанрах, що й заданий автор</h4>
        <form asp-action="Query7" method="post">
            <div asp-validation-summary="ModelOnly" class="text-danger"></div>
            <div class="row g-3">
                <div class="col-md-4">
                    <label asp-for="LastName" class="form-label">Прізвище автора</label>
                    <input asp-for="LastName" class="form-control" />
                    <span asp-validation-for="LastName" class="text-danger"></span>
                </div>
            </div>
            <div class="mt-3">
                <button type="submit" class="btn btn-primary">Виконати</button>
            </div>
        </form>
    </div>

    <!-- Query 8 -->
    <div class="mb-4">
        <h4 class="mb-3">Запит 8: Користувачі, які лайкнули всі вірші автора</h4>
        <form asp-action="Query8" method="post">
            <div asp-validation-summary="ModelOnly" class="text-danger"></div>
            <div class="row g-3">
                <div class="col-md-4">
                    <label asp-for="LastName" class="form-label">Прізвище автора</label>
                    <input asp-for="LastName" class="form-control" />
                    <span asp-validation-for="LastName" class="text-danger"></span>
                </div>
            </div>
            <div class="mt-3">
                <button type="submit" class="btn btn-primary">Виконати</button>
            </div>
        </form>
    </div>

    <div class="mt-3">
        <a asp-controller="Home" asp-action="Index" class="btn btn-secondary">Повернутися до меню</a>
    </div>
</div>

@section Scripts {
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.19.3/jquery.validate.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validation-unobtrusive/3.2.12/jquery.validate.unobtrusive.min.js"></script>
}